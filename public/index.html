<!doctype html>
<html lang="de">
<head>

<link
rel="stylesheet"
href="https://unpkg.com/simplebar@latest/dist/simplebar.css"
/>
<script src="https://unpkg.com/simplebar@latest/dist/simplebar.min.js"></script>
<!-- or -->
<link
rel="stylesheet"
href="https://cdn.jsdelivr.net/npm/simplebar@latest/dist/simplebar.css"
/>
<script src="https://cdn.jsdelivr.net/npm/simplebar@latest/dist/simplebar.min.js"></script>
<meta charset="UTF-8">
<title>Emphatic Text Bot</title>

<style>
 

/* Globale Schriftart setzen (weniger "schnörkelig") */
body {
  font-family: sans-serif;
  overflow-y: hidden;
}
.maintitle {
  color: #111; font-family: 'Helvetica Neue', sans-serif; font-size: 100px; font-weight: bold; letter-spacing: -1px; line-height: 1; text-align: center;
}

.main

.bottomInput {
  position: relative;
   width: 100%;
   bottom: 40px;
      /* Height of the footer */
   padding: none;
   outline: none;

}

.inputMessage {
  border-radius: 18px;
  padding: 10px;
  position: fixed;
  background-color: white;
  color: black;
  height:30px;
  width: 100%;
  bottom:20px;

}
.usernameInput {
    display: flex;
    justify-content: center;
    align-items: center;
    text-decoration: none;
    padding: 10px 20px;
    width: 96%;
    border: none; 
    outline: none; 
    border-radius: 4px;
    background: #dd3e54;  /* fallback for old browsers */
    background: -webkit-linear-gradient(to right, #6be585, #dd3e54);  /* Chrome 10-25, Safari 5.1-6 */
    background: linear-gradient(to right, #6be585, #dd3e54); /* W3C, IE 10+/ Edge, Firefox 16+, Chrome 26+, Opera 12+, Safari 7+ */
    color: #fff;
    
}

    
/* Chat-Seite initial ausblenden */
.chat.page {
  display: none;
}


.unfinished {
  color:grey;
}

.complete {
  color: white;
}
.username{
  font-weight: bold;
  margin-right: 5px;
}

.messages {
  margin-left: 0px;
  padding-left: 0px;
  list-style-type: none;
  bottom:20px;
  
}
.messages li{
  padding: 3px;
  background-color: #0096FF;
  border-radius: 10px;
  margin-top: 5px;
  color:black;
}


/* Format für Benutzernamen bei der Ausgabe einer Chat-Nachricht */

.otherUser{
  text-align: left;
  width: 50%;
}


.currentUser{
  text-align: left;
  position: relative;
  left: 52%;
  width: 47.6%;

}

.background::-webkit-scrollbar {
    display: none; /* for Chrome, Safari, and Opera */
}

.background {
  overflow-y: scroll; 
  overflow-x: hidden;
  height: 80%;
  max-height: 450px;
  width: 100%;
  background-color: white;
}
.log {
  position: relative;
  color: white;
  font-size: 15px;
  text-align: center;
}

.emotionImages {
  height: 30px;
  width: auto;
  padding: 3px;
  margin-left: 5px;
}
.Happy {

}

.Sad {

}

.Angry {

}

.Neutral {

}

.Surprise {

}

.Disgust {
 
}

.hide {
  visibility: hidden;
}
.maintitle span{
  background: #dd3e54;  /* fallback for old browsers */
  background: -webkit-linear-gradient(to right, #6be585, #dd3e54);  /* Chrome 10-25, Safari 5.1-6 */
  background: linear-gradient(to right, #6be585, #dd3e54); /* W3C, IE 10+/ Edge, Firefox 16+, Chrome 26+, Opera 12+, Safari 7+ */

    background-size: 100%;
    -webkit-background-clip: text;
    -moz-background-clip: text;
    -webkit-text-fill-color: transparent;
    -moz-text-fill-color: transparent;
}
.title {
  color: #111; font-family: 'Helvetica Neue', sans-serif; font-size: 50px; font-weight: bold; letter-spacing: -1px; line-height: 1; text-align: center;

}

</style>
</head>
<body>
<!-- Login-Seite -->
<div class="login page">
<h2 class="maintitle">Hello and welcome to our <span>Empathic</span> Chat Room</h2>
<h3 class="title">In this experiment, we work with a facial expression recognition, to continue, enter your nickname</h3>
<input class="usernameInput" type="text" maxlength="14" />

</div>

<!-- Chat-Seite (initial ausgeblendet) -->
<div class="chat page">
<h3 >Chatting</h3>
<div class="background", id="simple-bar"><ul id ="list" class="messages" ></ul></div>
<h3 class="bottomInput"><input class="inputMessage" placeholder="Type here..." /></h3>

</div>


  <div id="age" class="hide">Age: -</div>
  <div id="gender" class="hide">Gender: -</div>
  <div id="emotion" class="hide"  >Happy</div>
  <div id="features" class="hide">Face Features: -</div>
  <div id="arousal" class="hide">Arrousal: -</div>
  <div id="Uncomfortable" class="hide">Uncomfortable: -</div>
  <div id="Excited" class="hide">Excited: -</div>
  <div id="Satisfied" class="hide">Satisfied: -</div>


<!-- Programmcode auf der Client-Seite -->
<script src="https://sdk.morphcast.com/mphtools/v1.0/mphtools.js"></script>
<script src="https://ai-sdk.morphcast.com/v1.14/ai-sdk.js"></script>
<script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
<script src="/socket.io/socket.io.js"></script>
<script src="/main.js"></script>


<script>
  
  CY.loader()
     .licenseKey("a49a0cf63e37382813f95b8bdea40c304cd3b835586f")
     .addModule(CY.modules().FACE_AGE.name)
     .addModule(CY.modules().FACE_GENDER.name)
     .addModule(CY.modules().FACE_EMOTION.name)
     .load()
     .then(({ start, stop }) => start());
  
  const age_div = document.querySelector("#age");
  const gen_div = document.querySelector("#gender");
  const emo_div = document.querySelector("#emotion");
  const fet_div = document.querySelector("#features");
  const arr_div = document.querySelector("#arousal");
  const arr1_div = document.querySelector("#Uncomfortable");
  const arr2_div = document.querySelector("#Excited");
  const arr3_div = document.querySelector("#Satisfied");
  
  window.addEventListener(CY.modules().FACE_AGE.eventName, (evt) => {
   age_div.innerHTML = 'Age: ' + evt.detail.output.numericAge;
  });
  
  window.addEventListener(CY.modules().FACE_GENDER.eventName, (evt) => {
   gen_div.innerHTML = 'Gender: ' + evt.detail.output.mostConfident;
  });
  
  window.addEventListener(CY.modules().FACE_EMOTION.eventName, (evt) => {
   emo_div.innerHTML = evt.detail.output.dominantEmotion;
  });
  window.addEventListener(CY.modules().FACE_FEATURES.eventName, (evt) => {
    fet_div.innerHTML = 'Attractivness: ' + evt.detail.output.features.Attractive;
  });

  window.addEventListener(CY.modules().FACE_AROUSAL_VALENCE.eventName, (evt) => {
    arr_div.innerHTML = 'Annoyed: ' + evt.detail.output.affects38.Annoyed;
  });
  window.addEventListener(CY.modules().FACE_AROUSAL_VALENCE.eventName, (evt) => {
    arr1_div.innerHTML = 'Uncomfortable: ' + evt.detail.output.affects38.Uncomfortable;
  });
  window.addEventListener(CY.modules().FACE_AROUSAL_VALENCE.eventName, (evt) => {
    arr2_div.innerHTML = 'Excited: ' + evt.detail.output.affects38.Excited;
  });
  window.addEventListener(CY.modules().FACE_AROUSAL_VALENCE.eventName, (evt) => {
    arr3_div.innerHTML = 'Satisfied: ' + evt.detail.output.affects38.Satisfied;
  });
  
  </script>
</body>
</html>